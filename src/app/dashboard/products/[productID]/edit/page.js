import Dashboardlayout from "@/components/layout/dashboard/dashboard";
import ProductForm from "@/components/pages/dashboard/products/ProductForm";
import { baseurl } from "@/config/setting";
import { serverMethod } from "@/helper/serverCall/datafetch";
import Head from "next/head";
import { useParams } from "next/navigation";
import React from "react";

export const metadata = {
  title: "Edit Product",
  description: "Generated by create next app",
  metadata: {},
};




const Page = async (props) => {
  // const category = await getCategories()
  // const brands = await getBrands()
  const result = await getRecord(props.params.productID)


  return (
    <>
      <Dashboardlayout>
      <ProductForm data={{ ...result }} initialValues={result.product.results} />
      </Dashboardlayout>
    </>
  );
};

export default Page;


export const getRecord = async (id)=>{

  const params = {
    method: "get",
    header: {},
    query: {}
  };
  const product = await serverMethod(
    `/products/${id}`,
    params
  );
  const brands = await serverMethod(
    `/brands`,
    params
  );
  const category = await serverMethod(
    `/categories`,
    params
  );


return {product,brands,category}

}